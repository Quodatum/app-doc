<?xml version="1.0" encoding="UTF-8"?>
<tasks xmlns="https://github.com/Quodatum/app-doc/task">
	<task name="gen.model.xquery">
	   <doc>Update models.xqm" from data/models
	   </doc>
		<xquery>
import module namespace bf = 'quodatum.tools.buildfields' at "lib/entity-gen.xqm";

bf:write(fn:resolve-uri("./data/doc/models"),fn:resolve-uri("generated/models.xqm"))
		</xquery>
	</task>
	
	<task name="data.load">
       <doc>Create or update database from files in data 
       </doc>
        <xquery>
  import module namespace dbtools = 'quodatum.dbtools'  at "lib/dbtools.xqm";
        
  let $app:="doc"
  let $db:="doc-data" 
  let $src:=$dbtools:webpath ||$app || "/data/doc/"
  return dbtools:sync-from-path($db,$src)
        </xquery>
    </task>
</tasks>