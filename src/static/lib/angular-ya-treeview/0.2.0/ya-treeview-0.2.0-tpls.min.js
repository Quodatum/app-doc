!function(a,b){"use strict";b["true"]=a,angular.module("ya.treeview",[]).factory("YaTreeviewService",function(){var a={},b=function(a,b){return angular.isArray(a[b.childrenKey])||a[b.hasChildrenKey]||!1};return a.children=function(a,b){var c=a.$model[b.childrenKey];if(angular.isFunction(c))return c();if(angular.isArray(c))return c;throw new Error("Children is neither an array nor a function.")},a.nodify=function(c,d,e){var f={$model:c,$parent:d,$hasChildren:b(c,e),collapsed:!e.expanded};if(f.$hasChildren)if(e.expanded){var g=a.children(f,e);f.$children=a.nodifyArray(g,f,e)}else f.$children=[];return f},a.nodifyArray=function(b,c,d){var e=[];return angular.forEach(b,function(b){e.push(a.nodify(b,c,d))}),e},a}).controller("YaTreeviewCtrl",["$scope","$timeout","YaTreeviewService",function(a,b,c){var d=function(a){var b={};return a=a||{},b.childrenKey=a.childrenKey||"children",b.hasChildrenKey=a.hasChildrenKey||"has_children",b.onExpand=a.onExpand||angular.noop,b.onCollapse=a.onCollapse||angular.noop,b.onSelect=a.onSelect||angular.noop,b.onDblClick=a.onDblClick||angular.noop,b.expanded=!!a.expanded,b},e=function(a,d){a.$hasChildren&&b(function(){angular.forEach(a.$children,function(a){if(a.$hasChildren){var b=c.children(a,g);a.$children=d||c.nodifyArray(b,a,g)}})})},f=function(a){var b={};b[g.childrenKey]=a;var d=c.nodify(b,null,g);return d.$children=c.nodifyArray(a,d,g),e(d),d.collapsed=!1,d};a.toggle=function(b,c){c.collapsed?a.expand(b,c):a.collapse(b,c)},a.expand=function(b,c){e(c),c.collapsed=!1,g.onExpand(b,c,a.context)},a.collapse=function(b,c){c.collapsed=!0,e(c,[]),angular.forEach(c.$children,function(a){a.collapsed=!0}),g.onCollapse(b,c,a.context)},a.selectNode=function(b,c){a.context.selectedNode=c,g.onSelect(b,c,a.context)},a.dblClick=function(b,c){g.onDblClick(b,c,a.context)};var g=d(a.options);a.node=f(a.model),g.expanded=!1,a.context=a.context||{},a.context.rootNode=a.node,a.context.nodify=function(a,b){return c.nodify(a,b,g)},a.context.nodifyArray=function(a,b){return c.nodifyArray(a,b,g)},a.context.children=function(a){return c.children(a,g)},a.$watch("model",function(b,c){b!==c&&(a.node=f(b))}),a.$watch("context.selectedNode",function(b){a.selectNode({},b)})}]).directive("yaTreeview",function(){return{restrict:"AE",replace:!0,transclude:!0,controller:"YaTreeviewCtrl",scope:{id:"@yaId",model:"=yaModel",options:"=yaOptions",context:"=yaContext"},templateUrl:"templates/ya-treeview/treeview.tpl.html",compile:function(a,b,c){return function(a,b,d,e){e.transcludeFn=c}}}}).directive("yaNode",["$compile",function(a){return{restrict:"AE",replace:!1,scope:!1,templateUrl:"templates/ya-treeview/children.tpl.html",compile:function(b){var c=b.clone();return b.empty(),function(b,d){b.node.$hasChildren&&d.append(a(c.html())(b))}}}}]).directive("yaTransclude",function(){return{restrict:"AE",replace:!1,require:"^yaTreeview",scope:!1,template:"",link:function(a,b,c,d){d.transcludeFn(a,function(c){a.node&&b.append(c)})}}}),angular.module("ya.treeview.tpls",["templates/ya-treeview/children.tpl.html","templates/ya-treeview/treeview.tpl.html"]),angular.module("templates/ya-treeview/children.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/children.tpl.html",'<ul ng-hide=node.collapsed><li class=node ng-repeat="node in node.$children"><div ng-show=node.$hasChildren><a ng-show=node.collapsed class="btn btn-link pull-left" ng-click="expand($event, node)"><i class="glyphicon glyphicon-chevron-right"></i></a> <a ng-hide=node.collapsed class="btn btn-link pull-left" ng-click="collapse($event, node)"><i class="glyphicon glyphicon-chevron-down"></i></a></div><div class=node-content ya-transclude="" ng-click="selectNode($event, node)" ng-dblclick="dblClick($event, node)"></div><div ya-node="" class=ya-node></div></li></ul>')}]),angular.module("templates/ya-treeview/treeview.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/treeview.tpl.html",'<div class=ya-treeview><div ya-node="" class=ya-node></div></div>')}])}({},function(){return this}());