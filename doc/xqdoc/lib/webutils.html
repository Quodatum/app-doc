<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>XQuery documentation </title>
    <link rel="stylesheet" type="text/css" href="../style.css"></link>
  </head>
  <body>
    <div class="right">
      <img width="104" src="../basex.svg"></img>
    </div>
    <h2>Library Module: lib/webutils.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>quodatum.web.utils4</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>web utils</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>andy bunce</td>
      </tr>
      <tr>
        <td>
          <b>Since:</b>
        </td>
        <td>oct 2012</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <a name="dice#0">
      <h3>dice()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>map of available dice parameters</td>
      </tr>
    </table>
    <a name="download-response#2">
      <h3>download-response($method, $filename)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$method</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$filename</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>headers for download</td>
      </tr>
    </table>
    <a name="fixup#1">
      <h3>fixup($n)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$n</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>transform xml to json serialable xml driven by @type="array" and convention.
all namespaces are removed</td>
      </tr>
    </table>
    <a name="fixup#2">
      <h3>fixup($n, $type)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$n</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$type</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <a name="headers#2">
      <h3>headers($attachment, $response)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$attachment</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$response</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>CORS header with download option</td>
      </tr>
    </table>
    <a name="http-auth#2">
      <h3>http-auth($auth-scheme, $response)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$auth-scheme</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$response</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>REST created http://restpatterns.org/HTTP_Status_Codes/401_-_Unauthorized</td>
      </tr>
    </table>
    <a name="http-created#2">
      <h3>http-created($location, $response)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$location</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$response</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>REST created http://restpatterns.org/HTTP_Status_Codes/201_-_Created</td>
      </tr>
    </table>
    <a name="json-response#0">
      <h3>json-response()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <a name="method#1">
      <h3>method($method)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$method</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>headers for download</td>
      </tr>
    </table>
    <a name="status#2">
      <h3>status($code, $reason)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$code</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$reason</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <a name="strip-ns#1">
      <h3>strip-ns($n)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$n</code>
              </td>
              <td>
                <code>node()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>node()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <a name="svg-response#0">
      <h3>svg-response()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>todo use basex mime</td>
      </tr>
    </table>
    <a name="zip-download#2">
      <h3>zip-download($zipname, $data)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$zipname</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$data</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>download as zip file</td>
      </tr>
    </table>
  </body>
</html>