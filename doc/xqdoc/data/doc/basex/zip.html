<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>XQuery documentation </title>
    <link rel="stylesheet" type="text/css" href="../../../style.css"></link>
  </head>
  <body>
    <div class="right">
      <img width="104" src="../../../basex.svg"></img>
    </div>
    <h2>Library Module: data/doc/basex.xqm/zip.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>http://expath.org/ns/zip</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This <a href="http://docs.basex.org/wiki/Module_Library">XQuery Module</a> contains functions to handle ZIP archives. The contents of ZIP files can be extracted and listed, and new archives can be created. The module is based on the <a href="http://expath.org/spec/zip">EXPath ZIP Module</a> . It may soon be replaced by the <a href="http://docs.basex.org/wiki/Archive_Module">Archive Module</a> .</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>BaseX Team</td>
      </tr>
      <tr>
        <td>
          <b>See:</b>
        </td>
        <td>http://docs.basex.org/wiki/Module_Library</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <a name="binary-entry#2">
      <h3>binary-entry($uri, $path)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$path</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:base64Binary</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Extracts the binary file at <code>$path</code> within the ZIP file located at <code>$uri</code> and returns it as an <code>xs:base64Binary</code> item.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="entries#1">
      <h3>entries($uri)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element(zip:file)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Generates an <a href="http://expath.org/spec/zip#spec-file-handling-elements-sect">ZIP XML Representation</a> of the hierarchical structure of the ZIP file located at <code>$uri</code> and returns it as an element node. The file contents are not returned by this function.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="html-entry#2">
      <h3>html-entry($uri, $path)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$path</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>document-node()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Extracts the HTML file at <code>$path</code> within the ZIP file located at <code>$uri</code> and returns it as a document node. The file is converted to XML first if <a href="http://home.ccil.org/~cowan/XML/tagsoup/">Tagsoup</a> is found in the classpath.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:FODC0006 the addressed file is not well-formed, or cannot be converted to correct XML.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="text-entry#2">
      <h3>text-entry($uri, $path)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$path</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Extracts the text file at <code>$path</code> within the ZIP file located at <code>$uri</code> and returns it as an <code>xs:string</code> item.
An optional encoding can be specified via <code>$encoding</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="text-entry#3">
      <h3>text-entry($uri, $path, $encoding)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$path</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$encoding</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Extracts the text file at <code>$path</code> within the ZIP file located at <code>$uri</code> and returns it as an <code>xs:string</code> item.
An optional encoding can be specified via <code>$encoding</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="update-entries#2">
      <h3>update-entries($zip, $output)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$zip</code>
              </td>
              <td>
                <code>element(zip:file)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$output</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>empty-sequence()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Updates an existing ZIP archive or creates a modifed copy, based on the characteristics described by <code>$zip</code> , the <a href="http://expath.org/spec/zip#spec-file-handling-elements-sect">ZIP XML Representation</a> . The <code>$output</code> argument is the URI where the modified ZIP file is copied to.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 an addressed file does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0002 entries in the ZIP archive description are unknown, missing, or invalid.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:Serialization Errors an inlined XML fragment cannot be successfully serialized.</td>
      </tr>
    </table>
    <a name="xml-entry#2">
      <h3>xml-entry($uri, $path)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$uri</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$path</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>document-node()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Extracts the XML file at <code>$path</code> within the ZIP file located at <code>$uri</code> and returns it as a document node.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:FODC0006 the addressed file is not well-formed.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 the specified path does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
    </table>
    <a name="zip-file#1">
      <h3>zip-file($zip)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$zip</code>
              </td>
              <td>
                <code>element(zip:file)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>empty-sequence()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Creates a new ZIP archive with the characteristics described by <code>$zip</code> , the <a href="http://expath.org/spec/zip#spec-file-handling-elements-sect">ZIP XML Representation</a> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0001 an addressed file does not exist.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0002 entries in the ZIP archive description are unknown, missing, or invalid.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:ZIP0003 the operation fails for some other reason.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>experr:Serialization Errors an inlined XML fragment cannot be successfully serialized.</td>
      </tr>
    </table>
  </body>
</html>