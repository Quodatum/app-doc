<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>XQuery documentation </title>
    <link rel="stylesheet" type="text/css" href="../../../style.css"></link>
  </head>
  <body>
    <div class="right">
      <img width="104" src="../../../basex.svg"></img>
    </div>
    <h2>Library Module: data/doc/basex.xqm/client.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>http://basex.org/modules/client</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This <a href="http://docs.basex.org/wiki/Module_Library">XQuery Module</a> contains functions to access remote BaseX server instances from XQuery. With this module, you can on the one hand execute database commands and on the other hand evaluate queries, the results of which are returned as XDM sequences.</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>BaseX Team</td>
      </tr>
      <tr>
        <td>
          <b>See:</b>
        </td>
        <td>http://docs.basex.org/wiki/Module_Library</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <a name="close#1">
      <h3>close($id)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$id</code>
              </td>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>empty-sequence()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This function closes a client session. <code>$id</code> specifies the session id.
At the end of query execution, open sessions will be automatically closed.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0003 an I/O error occurs while transferring data from or to the server.</td>
      </tr>
    </table>
    <a name="connect#4">
      <h3>connect($host, $port, $user, $password)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$host</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$port</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$user</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$password</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This function establishes a connection to a remote BaseX server, creates a new client session, and returns a session id. The parameter <code>$host</code> is the name of the database server, <code>$port</code> specifies the server port, and <code>$user</code> and <code>$password</code> represent the login data.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0001 an error occurs while creating the session (possible reasons: server not available, access denied).</td>
      </tr>
    </table>
    <a name="execute#2">
      <h3>execute($id, $command)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$id</code>
              </td>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$command</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This function executes a <a href="http://docs.basex.org/wiki/Commands">command</a> and returns the result as string. The parameter <code>$id</code> contains the session id returned by <a href="http://docs.basex.org/wiki/Client_Module#client:connect">client:connect</a> . The <code>$command</code> argument represents a single command, which will be executed by the server.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0003 an I/O error occurs while transferring data from or to the server.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0004 an error occurs while executing a command.</td>
      </tr>
    </table>
    <a name="info#1">
      <h3>info($id)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$id</code>
              </td>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This function returns an information string, created by a previous call of <a href="#client:execute">client:execute</a> . <code>$id</code> specifies the session id.</td>
      </tr>
    </table>
    <a name="query#2">
      <h3>query($id, $query)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$id</code>
              </td>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$query</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Evaluates a query and returns the result as sequence. The parameter <code>$id</code> contains the session id returned by <a href="http://docs.basex.org/wiki/Client_Module#client:connect">client:connect</a> , and <code>$query</code> represents the query string, which will be evaluated by the server.
Variables and the context item can be declared via <code>$bindings</code> . The specified keys must be QNames or strings: <ul> <li> If a key is a QName, it will be directly adopted as variable name. </li> <li> If a key is a string, it may be prefixed with a dollar sign. A namespace can be specified using the <a href="http://www.jclark.com/xml/xmlns.htm">Clark Notation</a>. If the specified string is empty, the value will be bound to the context item. </li> </ul>
        </td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0003 an I/O error occurs while transferring data from or to the server.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0005 an error occurs while evaluating a query, and if the original error cannot be extracted from the returned error string.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0006 a value to be bound is no single item.</td>
      </tr>
    </table>
    <a name="query#3">
      <h3>query($id, $query, $bindings)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$id</code>
              </td>
              <td>
                <code>xs:anyURI</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$query</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$bindings</code>
              </td>
              <td>
                <code>map(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Evaluates a query and returns the result as sequence. The parameter <code>$id</code> contains the session id returned by <a href="http://docs.basex.org/wiki/Client_Module#client:connect">client:connect</a> , and <code>$query</code> represents the query string, which will be evaluated by the server.
Variables and the context item can be declared via <code>$bindings</code> . The specified keys must be QNames or strings: <ul> <li> If a key is a QName, it will be directly adopted as variable name. </li> <li> If a key is a string, it may be prefixed with a dollar sign. A namespace can be specified using the <a href="http://www.jclark.com/xml/xmlns.htm">Clark Notation</a>. If the specified string is empty, the value will be bound to the context item. </li> </ul>
        </td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0003 an I/O error occurs while transferring data from or to the server.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0005 an error occurs while evaluating a query, and if the original error cannot be extracted from the returned error string.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>bxerr:BXCL0006 a value to be bound is no single item.</td>
      </tr>
    </table>
  </body>
</html>