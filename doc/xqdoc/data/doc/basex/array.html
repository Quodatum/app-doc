<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>XQuery documentation </title>
    <link rel="stylesheet" type="text/css" href="../../../style.css"></link>
  </head>
  <body>
    <div class="right">
      <img width="104" src="../../../basex.svg"></img>
    </div>
    <h2>Library Module: data/doc/basex.xqm/array.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>x-http://www.w3.org/2005/xpath-functions/array</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This <a href="http://docs.basex.org/wiki/Module_Library">XQuery Module</a> contains functions for manipulating arrays, which will officially be introduced with <a href="http://docs.basex.org/wiki/XQuery_3.1#Arrays">XQuery 3.1</a> . <br></br>  <b>Please note</b> that the functions are subject to change until the specification has reached its final stage.</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>BaseX Team</td>
      </tr>
      <tr>
        <td>
          <b>See:</b>
        </td>
        <td>http://docs.basex.org/wiki/Module_Library</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <a name="append#2">
      <h3>append($array, $member)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$member</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a copy of <code>$array</code> with a new <code>$member</code> attached.</td>
      </tr>
    </table>
    <a name="filter#2">
      <h3>filter($array, $function)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$function</code>
              </td>
              <td>
                <code>function(item()*) as xs:boolean</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array with those members of <code>$array</code> for which <code>$function</code> returns <code>true</code> .</td>
      </tr>
    </table>
    <a name="flatten#1">
      <h3>flatten($items)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$items</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Recursively flattens all arrays that occur in the supplied <code>$items</code> .</td>
      </tr>
    </table>
    <a name="fold-left#3">
      <h3>fold-left($array, $zero, $function)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$zero</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$function</code>
              </td>
              <td>
                <code>function(item()*, item()*) as item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Evaluates the supplied <code>$function</code> cumulatively on successive members of the supplied <code>$array</code> from left to right and using <code>$zero</code> as first argument.</td>
      </tr>
    </table>
    <a name="fold-right#3">
      <h3>fold-right($array, $zero, $function)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$zero</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$function</code>
              </td>
              <td>
                <code>function(item()*, item()*) as item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Evaluates the supplied <code>$function</code> cumulatively on successive members of the supplied <code>$array</code> from right to left and using <code>$zero</code> as first argument.</td>
      </tr>
    </table>
    <a name="for-each#2">
      <h3>for-each($array, $function)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$function</code>
              </td>
              <td>
                <code>function(item()*) as item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array, in which each member is computed by applying <code>$function</code> to the corresponding member of <code>$array</code> .</td>
      </tr>
    </table>
    <a name="for-each-pair#3">
      <h3>for-each-pair($array1, $array2, $function)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array1</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$array2</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$function</code>
              </td>
              <td>
                <code>function(item()*) as item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array obtained by evaluating the supplied <code>$function</code> for each pair of members at the same position in <code>$array1</code> and <code>$array2</code> .</td>
      </tr>
    </table>
    <a name="get#2">
      <h3>get($array, $position)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$position</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns the <code>$array</code> member at the specified <code>$position</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 <code>$position</code> is not in the range <code>1</code> to <code>array:size($array)</code> inclusive.</td>
      </tr>
    </table>
    <a name="head#1">
      <h3>head($array)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns the first member of <code>$array</code> . This function is equivalent to the expression <code>$array(1)</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 The array is empty.</td>
      </tr>
    </table>
    <a name="insert-before#3">
      <h3>insert-before($array, $position, $member)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$position</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$member</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a copy of <code>$array</code> with one new <code>$member</code> at the specified <code>$position</code> . Setting <code>$position</code> to the value <code>array:size($array) + 1</code> yields the same result as <code>array:append($array, $insert)</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 <code>$position</code> is not in the range <code>1</code> to <code>array:size($array) + 1</code> inclusive.</td>
      </tr>
    </table>
    <a name="join#1">
      <h3>join($arrays)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$arrays</code>
              </td>
              <td>
                <code>array(*)*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Concatenates the contents of several <code>$arrays</code> into a single array.</td>
      </tr>
    </table>
    <a name="remove#2">
      <h3>remove($array, $position)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$position</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a copy of <code>$array</code> without the member at the specified <code>$position</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 <code>$position</code> is not in the range <code>1</code> to <code>array:size($array)</code> inclusive.</td>
      </tr>
    </table>
    <a name="reverse#1">
      <h3>reverse($array)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array with all members of <code>$array</code> in reverse order.</td>
      </tr>
    </table>
    <a name="serialize#1">
      <h3>serialize($input)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$input</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>This function is specific to BaseX. It returns a string representation of the supplied array. The purpose of this function is to get an insight into the structure of an array item; it cannot necessarily be used for reconstructing the original array.</td>
      </tr>
    </table>
    <a name="size#1">
      <h3>size($input)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$input</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns the number of members in <code>$array</code> . Note that because an array is an item, the <code>fn:count</code> function when applied to an array always returns <code>1</code> .</td>
      </tr>
    </table>
    <a name="sort#1">
      <h3>sort($array)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array with sorted <code>$array</code> members. If a sort <code>$key</code> function is given, it will be applied on all array members. The items of the resulting values will be sorted using the semantics of the <code>lt</code> expression.</td>
      </tr>
    </table>
    <a name="sort#2">
      <h3>sort($array, $key)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$key</code>
              </td>
              <td>
                <code>function(item()*) as xs:anyAtomicType*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array with sorted <code>$array</code> members. If a sort <code>$key</code> function is given, it will be applied on all array members. The items of the resulting values will be sorted using the semantics of the <code>lt</code> expression.</td>
      </tr>
    </table>
    <a name="subarray#2">
      <h3>subarray($array, $position)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$position</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Constructs a new array with with <code>$length</code> members of <code>$array</code> beginning from the specified <code>$position</code> .
The two-argument version of the function returns the same result as the three-argument version when called with <code>$length</code> equal to the value of <code>array:size($array) - $position + 1</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 <code>$position</code> is less than one, or if <code>$position + $length</code> is greater than <code>array:size($array) + 1</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0002 <code>$length</code> is less than zero.</td>
      </tr>
    </table>
    <a name="subarray#3">
      <h3>subarray($array, $position, $length)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$position</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$length</code>
              </td>
              <td>
                <code>xs:integer</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Constructs a new array with with <code>$length</code> members of <code>$array</code> beginning from the specified <code>$position</code> .
The two-argument version of the function returns the same result as the three-argument version when called with <code>$length</code> equal to the value of <code>array:size($array) - $position + 1</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 <code>$position</code> is less than one, or if <code>$position + $length</code> is greater than <code>array:size($array) + 1</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0002 <code>$length</code> is less than zero.</td>
      </tr>
    </table>
    <a name="tail#1">
      <h3>tail($array)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$array</code>
              </td>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>array(*)</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns a new array with all members except the first from <code>$array</code> . This function is equivalent to the expression <code>array:remove($array, 1)</code> .</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>:FOAY0001 The array is empty.</td>
      </tr>
    </table>
  </body>
</html>