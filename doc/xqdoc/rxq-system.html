<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>XQuery documentation </title>
    <link rel="stylesheet" type="text/css" href="style.css"></link>
  </head>
  <body>
    <div class="right">
      <img width="104" src="basex.svg"></img>
    </div>
    <h2>Library Module: rxq-system.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>quodatum.system.rest</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>A RESTXQ interface for common system functionality
includes tasks</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>Andy Bunce</td>
      </tr>
      <tr>
        <td>
          <b>Version:</b>
        </td>
        <td>0.1</td>
      </tr>
    </table>
    <h2>Variables</h2>
    <h3 name="db">$db</h3>
    <table>
      <tr>
        <td>
          <b>Type:</b>
        </td>
        <td>
          <code>xs:string</code>
        </td>
      </tr>
    </table>
    <h3 name="state">$state</h3>
    <table>
      <tr>
        <td>
          <b>Type:</b>
        </td>
        <td>
          <code>element(state)</code>
        </td>
      </tr>
    </table>
    <h3 name="tasks">$tasks</h3>
    <table>
      <tr>
        <td>
          <b>Type:</b>
        </td>
        <td>
          <code>element(xqdoc:xqdoc)</code>
        </td>
      </tr>
    </table>
    <h2>Functions</h2>
    <a name="atask2#2">
      <h3>atask2($app, $task)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$app</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$task</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%output:method("json")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:GET</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:path("/doc/task/{$task}")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:query-param("app", "{$app}", "doc")</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>about a task</td>
      </tr>
    </table>
    <a name="dopost#0">
      <h3>dopost()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%updating</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:POST</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:path("/doc/ping")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%output:method("text")</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>ping incr counter</td>
      </tr>
    </table>
    <a name="dostate#0">
      <h3>dostate()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%output:method("text")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:GET</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:path("/doc/ping")</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>ping incr counter</td>
      </tr>
    </table>
    <a name="dotask2#2">
      <h3>dotask2($app, $task)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$app</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$task</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%updating</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%output:method("text")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:POST</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:path("/doc/task/{$task}")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:query-param("app", "{$app}", "doc")</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>run a task</td>
      </tr>
    </table>
    <a name="get-base#1">
      <h3>get-base($app)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$app</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <a name="get-task#1">
      <h3>get-task($name)</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$name</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>xquery src for name</td>
      </tr>
    </table>
    <a name="listtasks#0">
      <h3>listtasks()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>element()</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%restxq:GET</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%restxq:path("/doc/task")</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>%output:method("json")</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>list tasks</td>
      </tr>
    </table>
    <a name="tasks#0">
      <h3>tasks()</h3>
    </a>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>all task names</td>
      </tr>
    </table>
  </body>
</html>